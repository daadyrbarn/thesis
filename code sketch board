for i to numPeaks
  selectObject: iPeaks
  t = Get time from index: i
  t$ = Get time from index: i
  appendInfoLine: "Peak ", i, ":  ", t$

  int = Get value at time: t
  int$ = Get value at time: t
  appendInfoLine: "  Intensity: ", int$

  selectObject: pitch
  pit = Get value at time: t, "Hertz", "Linear"
  pit$ = Get value at time: t, "Hertz", "Linear"

  pitchDiff = pit-meanPitch
  pitchDiffInt = (pitchDiff*pitchDiff)/pitchDiff


## Goal is to add arrow to the last point with defined pitch.
  if pit$ =












  if pit$ = "--undefined-- Hz"
    emptyPeaks = emptyPeaks + 1
    appendInfoLine: "  Pitch: No pitch found at this point."
  else
    if i = numPeaks
      selectObject: symbols
      if pitchDiffInt > pitchVar
        if pitchDiff > 0
          arrow$ = Get string: 3
          appendInfoLine: "  Pitch: ", pit$, "  ", arrow$
        else
          arrow$ = Get string: 2
          appendInfoLine: "  Pitch ", pit$, "  ", arrow$
        endif
      else
        arrow$ = Get string: 1
        appendInfoLine: "  Pitch: ", pit$, "  ", arrow$
      endif
    else
      appendInfoLine: "  Pitch: ", pit$
    endif
  endif
endfor

appendInfoLine: ""
appendInfoLine: "Peaks with no pitch: ", emptyPeaks
appendInfoLine: ""
